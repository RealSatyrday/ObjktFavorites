<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Objkt Favorites (Test)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { font-size: 1.5em; }
    select { margin-bottom: 15px; }
    ul { list-style: none; padding: 0; }
    li { margin-bottom: 10px; padding: 5px; border-bottom: 1px solid #ccc; }
  </style>
</head>
<body>
  <h1>Objkt Favorites (Test Data)</h1>
  
  <label for="filter">Show by:</label>
  <select id="filter">
    <option value="day">Day</option>
    <option value="week">Week</option>
    <option value="month">Month</option>
  </select>
  
  <ul id="art-list"></ul>

  <script>
    async function loadArtworks() {
      const response = await fetch('test_data.json');
      const data = await response.json();
      return data;
    }

    function filterArtworks(artworks, range) {
      const now = new Date();
      let cutoff;

      if (range === 'day') {
        cutoff = new Date(now);
        cutoff.setDate(now.getDate() - 1);
      } else if (range === 'week') {
        cutoff = new Date(now);
        cutoff.setDate(now.getDate() - 7);
      } else if (range === 'month') {
        cutoff = new Date(now);
        cutoff.setMonth(now.getMonth() - 1);
      }

      return artworks.filter(art => new Date(art.date) >= cutoff);
    }

    function displayArtworks(artworks) {
  const list = document.getElementById('art-list');
  list.innerHTML = '';
  if (artworks.length === 0) {
    list.innerHTML = '<li>No artworks in this range.</li>';
  } else {
    artworks.forEach(art => {
      const li = document.createElement('li');
      li.innerHTML = `
        <strong>${art.artist}</strong> â€” ${art.title} (${art.date})<br>
        <img src="${art.image}" alt="${art.title}" style="max-width:200px; margin-top:5px;">
      `;
      list.appendChild(li);
    });
  }
}


    async function init() {
      const artworks = await loadArtworks();
      const filter = document.getElementById('filter');
      
      function updateDisplay() {
        const filtered = filterArtworks(artworks, filter.value);
        displayArtworks(filtered);
      }

      filter.addEventListener('change', updateDisplay);
      updateDisplay(); // initial load
    }

    init();
  </script>
</body>
</html>
