<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Objkt API Schema Debug</title>
<style>
  body { font-family: monospace; background: #111; color: #0f0; padding: 20px; }
  h1 { color: #0ff; }
  pre { white-space: pre-wrap; }
</style>
</head>
<body>
<h1>Objkt API Schema Debug</h1>
<div id="output">Fetching schema...</div>

<script>
const endpoint = "https://data.objkt.com/v3/graphql";

// Standard GraphQL introspection query to list root fields
const introspectionQuery = `
query IntrospectionQuery {
  __schema {
    queryType {
      fields {
        name
        description
      }
    }
  }
}
`;

fetch(endpoint, {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ query: introspectionQuery })
})
.then(res => res.json())
.then(data => {
  const outputDiv = document.getElementById("output");
  if (data.errors) {
    outputDiv.textContent = "Error:\n" + JSON.stringify(data.errors, null, 2);
    return;
  }
  const fields = data.data.__schema.queryType.fields;
  let text = "Root-level query fields found:\n\n";
  fields.forEach(f => {
    text += `- ${f.name}${f.description ? " â€” " + f.description : ""}\n`;
  });
  outputDiv.textContent = text;
})
.catch(err => {
  document.getElementById("output").textContent = "Fetch error: " + err;
});
</script>
</body>
</html>
